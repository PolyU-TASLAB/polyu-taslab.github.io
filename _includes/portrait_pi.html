{% if include.lookup %}
  {% assign member = site.members 
    | where_exp: "member", "member.slug == include.lookup"
    | first
  %}
{% else %}
  {% assign member = include %}
{% endif %}

{% assign type = site.data.types[member.role] %}

<div class="portrait-wrapper" style="width: 240px; margin: 0 auto; display: flex; flex-direction: column; align-items: center;">
  <a
    {% if page.slug != member.slug %}
      href="{{ member.url | relative_url }}"
    {% endif %}
    class="portrait"
    data-style="{{ include.style }}"
    aria-label="{{ member.name | default: "member link" }}"
    style="display: flex; flex-direction: column; align-items: center; background: #fff; border-radius: 16px; box-shadow: 0 2px 12px rgba(0,0,0,0.07); padding: 1.2em 1.5em; transition: box-shadow 0.2s; min-width: 200px; max-width: 240px;"
  >
    {% if type %}
      <span style="margin-bottom: 0.5em;">
        {% include icon.html icon=type.icon %}
      </span>
    {% endif %}

    <img
      src="{{ member.image | relative_url }}"
      class="portrait-image"
      alt="member portrait"
      style="width: 110px; height: 110px; object-fit: cover; border-radius: 50%; margin-bottom: 1em; border: 3px solid #eaeaea;"
      {% include fallback.html %}
    >

    {% if member.name %}
      <span class="portrait-name" style="font-size: 1.08em; font-weight: 700; color: #222;">
        {{ member.name }}
      </span>
    {% endif %}

    {% if member.display_1 %}
      <span class="display_1" style="font-size: 0.98em; color: #666; margin-bottom: 0.5em; text-align: left; width: 100%; display: block;">
        {{member.display_1}}
      </span>
    {% endif %}

    {% if member.display_3 %}
      <span class="display_3" style="font-size: 0.95em; color: #aaa;">
        {{member.display_3}}
      </span>
    {% endif %}

    {% if member.description %}
      <div class="portrait-desc" style="margin-top: 0.8em; text-align: left; width: 100%; font-size: 0.97em; color: #444;">
        {{ member.description | markdownify | strip_html }}
      </div>
    {% endif %}
  </a>
</div>